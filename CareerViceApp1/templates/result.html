{% extends 'base.html' %}
{% block content %}
<div class="card p-4" id="result-section">
  <h3 class="mb-4">AI Career Suggestion</h3>

  <div class="mb-4">
    <h5 class="text-primary">Your Career Suggestion:</h5>
    <p>{{ suggestion }}</p>
  </div>

  <hr>
  <h5 class="mt-3 mb-3">Your Inputs:</h5>
  <ul class="list-group">
    {% for key, value in data.items %}
      <li class="list-group-item d-flex justify-content-between">
        <strong>{{ key|capfirst }}</strong>
        <span>{{ value }}</span>
      </li>
    {% endfor %}
  </ul>

  <div class="mt-4 d-flex flex-wrap justify-content-between">
    <a href="{% url 'qualification' %}" class="btn btn-success">Get Another Suggestion</a>
    <button onclick="downloadResult()" class="btn btn-outline-primary">Download Result</button>
    <button onclick="shareResult()" class="btn btn-outline-secondary">Share</button>
  </div>
</div>

<script>
  function downloadResult() {
    const element = document.getElementById('result-section');
    const blob = new Blob([element.innerText], { type: 'text/plain;charset=utf-8' });
    const link = document.createElement('a');
    link.download = 'career_advice.txt';
    link.href = URL.createObjectURL(blob);
    link.click();
  }

  function shareResult() {
    if (navigator.share) {
      navigator.share({
        title: 'Career Suggestion',
        text: document.getElementById('result-section').innerText
      });
    } else {
      alert('Web Share not supported in this browser.');
    }
  }
</script>
{% endblock %}
